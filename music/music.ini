[Rainmeter]
Update=100
AccurateText=1
DynamicWindowSize=1
BackgroundMode=2
SolidColor=0,0,0,1

[Metadata]
Name=Music Player OneUI
Author=OneUI Theme
Version=1.0
License=Creative Commons Attribution-Non-Commercial-Share Alike 3.0
Description=Modern music player widget with WebNowPlaying support

; ========== Variables ==========
[Variables]
@Include=#@#Variables.inc
PlayerName=Chrome
Scale=1
BackgroundOpacity=60
CoverOpacity=40
WidgetWidth=380
WidgetHeight=110

; ========== Measures ==========
[MeasurePlayerName]
Measure=Plugin
Plugin=WebNowPlaying
PlayerType=Title

[MeasureArtist]
Measure=Plugin
Plugin=WebNowPlaying
PlayerType=Artist

[MeasureTitle]
Measure=Plugin
Plugin=WebNowPlaying
PlayerType=Title

[MeasureAlbum]
Measure=Plugin
Plugin=WebNowPlaying
PlayerType=Album

[MeasurePosition]
Measure=Plugin
Plugin=WebNowPlaying
PlayerType=Position

[MeasureDuration]
Measure=Plugin
Plugin=WebNowPlaying
PlayerType=Duration

[MeasureState]
Measure=Plugin
Plugin=WebNowPlaying
PlayerType=State

[MeasureCover]
Measure=Plugin
Plugin=WebNowPlaying
PlayerType=Cover

[MeasureProgress]
Measure=Calc
Formula=([MeasureDuration] > 0) ? ([MeasurePosition] / [MeasureDuration] * 100) : 0
MinValue=0
MaxValue=100

; ========== Styles ==========
[StyleText]
FontFace=Segoe UI
FontSize=12
FontColor=255,255,255,255
StringAlign=Left
AntiAlias=1

[StyleButton]
FontFace=Segoe UI Symbol
FontSize=16
FontColor=255,255,255,200
StringAlign=Center
AntiAlias=1
MouseOverAction=[!SetOption #CURRENTSECTION# FontColor "255,255,255,255"][!UpdateMeter #CURRENTSECTION#][!Redraw]
MouseLeaveAction=[!SetOption #CURRENTSECTION# FontColor "255,255,255,200"][!UpdateMeter #CURRENTSECTION#][!Redraw]

; ========== Background ==========
[CoverBackground]
Meter=Image
MeasureName=MeasureCover
X=0
Y=0
W=#WidgetWidth#
H=#WidgetHeight#
PreserveAspectRatio=2
ImageAlpha=#CoverOpacity#
DynamicVariables=1

[BackgroundOverlay]
Meter=Shape
Shape=Rectangle 0,0,#WidgetWidth#,#WidgetHeight#,12 | Fill Color 0,0,0,#BackgroundOpacity# | StrokeWidth 0
DynamicVariables=1

[BackgroundBorder]
Meter=Shape
Shape=Rectangle 0,0,#WidgetWidth#,#WidgetHeight#,12 | Fill Color 0,0,0,0 | StrokeWidth 1 | Stroke Color 255,255,255,30
DynamicVariables=1

; ========== Cover Art ==========
[CoverArt]
Meter=Image
MeasureName=MeasureCover
X=15
Y=15
W=70
H=70
PreserveAspectRatio=1
ImageAlpha=255

[CoverFrame]
Meter=Shape
X=15
Y=15
Shape=Rectangle 0,0,70,70,8 | Fill Color 0,0,0,0 | StrokeWidth 1 | Stroke Color 255,255,255,60

; ========== Text Elements ==========
[TextTitle]
Meter=String
MeasureName=MeasureTitle
X=100
Y=18
W=265
H=18
Text=%1
FontFace=Segoe UI Semibold
FontSize=13
FontColor=255,255,255,255
StringAlign=Left
ClipString=1
AntiAlias=1

[TextArtist]
Meter=String
MeasureName=MeasureArtist
X=100
Y=36
W=265
H=15
Text=%1
FontFace=Segoe UI
FontSize=11
FontColor=255,255,255,180
StringAlign=Left
ClipString=1
AntiAlias=1

[TextAlbum]
Meter=String
MeasureName=MeasureAlbum
X=100
Y=52
W=265
H=12
Text=%1
FontFace=Segoe UI
FontSize=9
FontColor=255,255,255,120
StringAlign=Left
ClipString=1
AntiAlias=1

; ========== Progress Bar ==========
[ProgressBackground]
Meter=Shape
X=100
Y=70
Shape=Rectangle 0,0,265,4,2 | Fill Color 255,255,255,40 | StrokeWidth 0

[ProgressBar]
Meter=Shape
MeasureName=MeasureProgress
X=100
Y=70
Shape=Rectangle 0,0,(265*[MeasureProgress]/100),4,2 | Fill Color 100,200,255,220 | StrokeWidth 0
DynamicVariables=1
LeftMouseUpAction=[!CommandMeasure MeasurePosition "SetPosition $MouseX:%$"]

[ProgressDot]
Meter=Shape
MeasureName=MeasureProgress
X=(100+(265*[MeasureProgress]/100)-4)
Y=68
Shape=Ellipse 0,0,8 | Fill Color 100,200,255,255 | StrokeWidth 0
DynamicVariables=1
Hidden=([MeasureProgress] = 0)
LeftMouseDownAction=[!SetVariable DraggingProgress 1]
LeftMouseUpAction=[!SetVariable DraggingProgress 0][!CommandMeasure MeasurePosition "SetPosition $MouseX:%$"]

; ========== Time Display ==========
[TimePosition]
Meter=String
MeasureName=MeasurePosition
X=100
Y=78
Text=[MeasurePosition:FormatTime]
FontFace=Segoe UI
FontSize=9
FontColor=255,255,255,160
StringAlign=Left
AntiAlias=1
Format=%M:%S

[TimeDuration]
Meter=String
MeasureName=MeasureDuration
X=365
Y=78
Text=[MeasureDuration:FormatTime]
FontFace=Segoe UI
FontSize=9
FontColor=255,255,255,160
StringAlign=Right
AntiAlias=1
Format=%M:%S

; ========== Control Buttons ==========
[ButtonPrevious]
Meter=Image
ImageName=#@#back.png
X=140
Y=86
W=20
H=20
ImageAlpha=180
LeftMouseUpAction=[!CommandMeasure MeasurePlayerName "Previous"]
MouseOverAction=[!SetOption #CURRENTSECTION# ImageAlpha "255"][!UpdateMeter #CURRENTSECTION#][!Redraw]
MouseLeaveAction=[!SetOption #CURRENTSECTION# ImageAlpha "180"][!UpdateMeter #CURRENTSECTION#][!Redraw]

[ButtonPlayPause]
Meter=Image
MeasureName=MeasureState
ImageName=#@#play.png
X=180
Y=86
W=20
H=20
ImageAlpha=255
LeftMouseUpAction=[!CommandMeasure MeasurePlayerName "PlayPause"]
MouseOverAction=[!SetOption #CURRENTSECTION# ImageAlpha "200"][!UpdateMeter #CURRENTSECTION#][!Redraw]
MouseLeaveAction=[!SetOption #CURRENTSECTION# ImageAlpha "255"][!UpdateMeter #CURRENTSECTION#][!Redraw]
IfCondition=MeasureState = 1
IfTrueAction=[!SetOption ButtonPlayPause ImageName "#@#pause.png"]
IfFalseAction=[!SetOption ButtonPlayPause ImageName "#@#play.png"]
DynamicVariables=1

[ButtonNext]
Meter=Image
ImageName=#@#next.png
X=220
Y=86
W=20
H=20
ImageAlpha=180
LeftMouseUpAction=[!CommandMeasure MeasurePlayerName "Next"]
MouseOverAction=[!SetOption #CURRENTSECTION# ImageAlpha "255"][!UpdateMeter #CURRENTSECTION#][!Redraw]
MouseLeaveAction=[!SetOption #CURRENTSECTION# ImageAlpha "180"][!UpdateMeter #CURRENTSECTION#][!Redraw]
