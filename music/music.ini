[Rainmeter]
Update=1000
AccurateText=1
DynamicWindowSize=1
BackgroundMode=2
SolidColor=0,0,0,1

[Metadata]
Name=Music Player OneUI
Author=OneUI Theme
Version=1.0
License=Creative Commons Attribution-Non-Commercial-Share Alike 3.0
Description=Modern music player widget with WebNowPlaying support

; ========== Variables ==========
[Variables]
@Include=#@#Variables.inc
PlayerName=Chrome
Scale=1
BackgroundOpacity=50
CoverOpacity=30
WidgetWidth=360
WidgetHeight=160

; ========== Measures ==========
[MeasurePlayerName]
Measure=Plugin
Plugin=WebNowPlaying.dll
PlayerType=Status

[MeasureArtist]
Measure=Plugin
Plugin=WebNowPlaying.dll
PlayerType=Artist

[MeasureTitle]
Measure=Plugin
Plugin=WebNowPlaying.dll
PlayerType=Title

[MeasureAlbum]
Measure=Plugin
Plugin=WebNowPlaying.dll
PlayerType=Album

[MeasurePosition]
Measure=Plugin
Plugin=WebNowPlaying.dll
PlayerType=Position
UpdateDivider=1

[MeasureDuration]
Measure=Plugin
Plugin=WebNowPlaying.dll
PlayerType=Duration

[MeasureState]
Measure=Plugin
Plugin=WebNowPlaying.dll
PlayerType=State

[MeasureCover]
Measure=Plugin
Plugin=WebNowPlaying.dll
PlayerType=Cover

[MeasureProgress]
Measure=Calc
Formula=(MeasureDuration > 0) ? (MeasurePosition / MeasureDuration * 100) : 0
MinValue=0
MaxValue=100
DynamicVariables=1
UpdateDivider=1

[MeasureDotX]
Measure=Calc
Formula=30 + ([MeasureProgress] * 304 / 100)
DynamicVariables=1
UpdateDivider=1

; ========== Styles ==========
[StyleText]
FontFace=Segoe UI
FontSize=12
FontColor=255,255,255,255
StringAlign=Left
AntiAlias=1

[StyleButton]
FontFace=Segoe UI Symbol
FontSize=16
FontColor=255,255,255,200
StringAlign=Center
AntiAlias=1
MouseOverAction=[!SetOption #CURRENTSECTION# FontColor "255,255,255,255"][!UpdateMeter #CURRENTSECTION#][!Redraw]
MouseLeaveAction=[!SetOption #CURRENTSECTION# FontColor "255,255,255,200"][!UpdateMeter #CURRENTSECTION#][!Redraw]

; ========== Background ==========
[CoverBackground]
Meter=Image
MeasureName=MeasureCover
X=0
Y=0
W=#WidgetWidth#
H=#WidgetHeight#
PreserveAspectRatio=2
ImageAlpha=#CoverOpacity#
DynamicVariables=1

[BackgroundOverlay]
Meter=Shape
Shape=Rectangle 0,0,#WidgetWidth#,#WidgetHeight#,12 | Fill Color 0,0,0,#BackgroundOpacity# | StrokeWidth 0
DynamicVariables=1

[BackgroundBorder]
Meter=Shape
Shape=Rectangle 0,0,#WidgetWidth#,#WidgetHeight#,12 | Fill Color 0,0,0,0 | StrokeWidth 1 | Stroke Color 255,255,255,30
DynamicVariables=1

; ========== Cover Art (Hidden) ==========

; ========== Text Elements ==========
[TextTitle]
Meter=String
MeasureName=MeasureTitle
X=30
Y=20
W=300
H=25
Text=%1
FontFace=Segoe UI Semibold
FontSize=14
FontColor=255,255,255,255
StringAlign=Left
ClipString=1
AntiAlias=1

[TextArtist]
Meter=String
MeasureName=MeasureArtist
X=30
Y=42
W=300
H=20
Text=%1
FontFace=Segoe UI
FontSize=11
FontColor=255,255,255,180
StringAlign=Left
ClipString=1
AntiAlias=1

; ========== Progress Bar ==========
[ProgressBackground]
Meter=Shape
X=30
Y=75
Shape=Rectangle 0,0,304,8,4 | Fill Color 255,255,255,40 | StrokeWidth 0

[ProgressBar]
Meter=Shape
MeasureName=MeasureProgress
X=30
Y=75
Shape=Rectangle 0,0,(304*[MeasureProgress]/100),8,4 | Fill Color 100,200,255,220 | StrokeWidth 0
DynamicVariables=1
LeftMouseUpAction=[!CommandMeasure MeasurePlayerName "SetPosition $MouseX:%$"]
UpdateDivider=1

[ProgressDot]
Meter=Shape
MeasureName=MeasureDotX
X=[MeasureDotX]
Y=79
Shape=Ellipse 0,0,8 | Fill Color 255,255,255,255 | StrokeWidth 0
DynamicVariables=1
UpdateDivider=1
LeftMouseDownAction=[!SetVariable DraggingProgress 1]
LeftMouseUpAction=[!SetVariable DraggingProgress 0][!CommandMeasure MeasurePlayerName "SetPosition $MouseX:%$"]
MouseOverAction=[!SetOption #CURRENTSECTION# Shape "Ellipse 0,0,10 | Fill Color 255,255,255,255 | StrokeWidth 0"][!UpdateMeter #CURRENTSECTION#][!Redraw]
MouseLeaveAction=[!SetOption #CURRENTSECTION# Shape "Ellipse 0,0,8 | Fill Color 255,255,255,255 | StrokeWidth 0"][!UpdateMeter #CURRENTSECTION#][!Redraw]

; ========== Time Display ==========
[TimePosition]
Meter=String
MeasureName=MeasurePosition
X=30
Y=90
Text=%1
FontFace=Segoe UI
FontSize=9
FontColor=255,255,255,160
StringAlign=Left
AntiAlias=1

[TimeDuration]
Meter=String
MeasureName=MeasureDuration
X=334
Y=90
Text=%1
FontFace=Segoe UI
FontSize=9
FontColor=255,255,255,160
StringAlign=Right
AntiAlias=1

; ========== Control Buttons ==========
[ButtonPrevious]
Meter=Image
ImageName=back.png
X=130
Y=115
W=20
H=20
ImageAlpha=180
LeftMouseUpAction=[!CommandMeasure MeasurePlayerName "Previous"]
MouseOverAction=[!SetOption #CURRENTSECTION# ImageAlpha "255"][!UpdateMeter #CURRENTSECTION#][!Redraw]
MouseLeaveAction=[!SetOption #CURRENTSECTION# ImageAlpha "180"][!UpdateMeter #CURRENTSECTION#][!Redraw]

[ButtonPlayPause]
Meter=Image
MeasureName=MeasureState
ImageName=play.png
X=170
Y=113
W=24
H=24
ImageAlpha=255
LeftMouseUpAction=[!CommandMeasure MeasurePlayerName "PlayPause"]
MouseOverAction=[!SetOption #CURRENTSECTION# ImageAlpha "220"][!UpdateMeter #CURRENTSECTION#][!Redraw]
MouseLeaveAction=[!SetOption #CURRENTSECTION# ImageAlpha "255"][!UpdateMeter #CURRENTSECTION#][!Redraw]
IfCondition=MeasureState = 1
IfTrueAction=[!SetOption ButtonPlayPause ImageName "pause.png"][!UpdateMeter ButtonPlayPause][!Redraw]
IfFalseAction=[!SetOption ButtonPlayPause ImageName "play.png"][!UpdateMeter ButtonPlayPause][!Redraw]
DynamicVariables=1

[ButtonNext]
Meter=Image
ImageName=next.png
X=210
Y=115
W=20
H=20
ImageAlpha=180
LeftMouseUpAction=[!CommandMeasure MeasurePlayerName "Next"]
MouseOverAction=[!SetOption #CURRENTSECTION# ImageAlpha "255"][!UpdateMeter #CURRENTSECTION#][!Redraw]
MouseLeaveAction=[!SetOption #CURRENTSECTION# ImageAlpha "180"][!UpdateMeter #CURRENTSECTION#][!Redraw]

; [ButtonShuffle]
; Meter=String
; X=270
; Y=78
; W=20
; H=18
; Text=⤮
; FontFace=Segoe UI Symbol
; FontSize=12
; FontColor=255,255,255,120
; StringAlign=Center
; AntiAlias=1
; LeftMouseUpAction=[!CommandMeasure MeasurePlayerName "Shuffle"]
; MouseOverAction=[!SetOption #CURRENTSECTION# FontColor "100,200,255,200"][!UpdateMeter #CURRENTSECTION#][!Redraw]
; MouseLeaveAction=[!SetOption #CURRENTSECTION# FontColor "255,255,255,120"][!UpdateMeter #CURRENTSECTION#][!Redraw]

; [ButtonRepeat]
; Meter=String
; X=310
; Y=78
; W=20
; H=18
; Text=↻
; FontFace=Segoe UI Symbol
; FontSize=12
; FontColor=255,255,255,120
; StringAlign=Center
; AntiAlias=1
; LeftMouseUpAction=[!CommandMeasure MeasurePlayerName "Repeat"]
; MouseOverAction=[!SetOption #CURRENTSECTION# FontColor "100,200,255,200"][!UpdateMeter #CURRENTSECTION#][!Redraw]
; MouseLeaveAction=[!SetOption #CURRENTSECTION# FontColor "255,255,255,120"][!UpdateMeter #CURRENTSECTION#][!Redraw]
