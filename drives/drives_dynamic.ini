[Rainmeter]
Update=500
DynamicWindowSize=1
AccurateText=1
BackgroundMode=2
SolidColor=32,32,32,255

[Variables]
; Màu sắc
TextColor=255,255,255,255
FrameColor=48,48,48,255      ; Màu frame bên ngoài
BarColors=0,191,255,255|0,255,128,255|255,165,0,255|255,99,132,255|75,192,192,255|255,205,86,255
BarBG=64,64,64,255          ; Màu xám đậm cho background
BarHeight=40                ; Thanh cao hơn
BarWidth=280
BarRadius=20                ; Bo tròn thanh
FrameRadius=30              ; Bo góc frame
Padding=20                  ; Padding bên trong

; Font chữ
FontFace=Segoe UI
FontSize=11
FontSizeSmall=9

; Vị trí các widget
StartY=(#Padding# + 10)
SpacingY=60

; Biến động
DriveCount=0
DriveList=""

; Script Lua
[MeasureScript]
Measure=Script
ScriptFile=drives.lua
UpdateDivider=2

; Measure theo dõi thay đổi ổ đĩa
[MeasureDriveChange]
Measure=Plugin
Plugin=UsageMonitor
Category=LogicalDisk
Counter=% Free Space
Instance=_Total
UpdateDivider=1
OnChangeAction=[!UpdateMeasure MeasureScript][!UpdateMeter *][!Redraw]

; ===== FRAME BÊN NGOÀI =====
[FrameBackground]
Meter=Shape
X=0
Y=0
DynamicVariables=1
Shape=Rectangle 0,0,(#BarWidth# + #Padding# * 2),(#StartY# + ([MeasureScript:GetDriveCount()] * #SpacingY#) + #Padding#),#FrameRadius# | Fill Color #FrameColor# | StrokeWidth 0

; ===== MEASURES ĐỘNG =====

; Measure cho ổ đĩa 1
[MeasureDrive1_Total]
Measure=FreeDiskSpace
Drive=[MeasureScript:GetDriveLetter(1)]:
Total=1
UpdateDivider=10
Disabled=([MeasureScript:GetDriveCount()] < 1 ? 1 : 0)
DynamicVariables=1

[MeasureDrive1_Used]
Measure=FreeDiskSpace
Drive=[MeasureScript:GetDriveLetter(1)]:
InvertMeasure=1
UpdateDivider=10
Disabled=([MeasureScript:GetDriveCount()] < 1 ? 1 : 0)
DynamicVariables=1

; Measure cho ổ đĩa 2
[MeasureDrive2_Total]
Measure=FreeDiskSpace
Drive=[MeasureScript:GetDriveLetter(2)]:
Total=1
UpdateDivider=10
Disabled=([MeasureScript:GetDriveCount()] < 2 ? 1 : 0)
DynamicVariables=1

[MeasureDrive2_Used]
Measure=FreeDiskSpace
Drive=[MeasureScript:GetDriveLetter(2)]:
InvertMeasure=1
UpdateDivider=10
Disabled=([MeasureScript:GetDriveCount()] < 2 ? 1 : 0)
DynamicVariables=1

; Measure cho ổ đĩa 3
[MeasureDrive3_Total]
Measure=FreeDiskSpace
Drive=[MeasureScript:GetDriveLetter(3)]:
Total=1
UpdateDivider=10
Disabled=([MeasureScript:GetDriveCount()] < 3 ? 1 : 0)
DynamicVariables=1

[MeasureDrive3_Used]
Measure=FreeDiskSpace
Drive=[MeasureScript:GetDriveLetter(3)]:
InvertMeasure=1
UpdateDivider=10
Disabled=([MeasureScript:GetDriveCount()] < 3 ? 1 : 0)
DynamicVariables=1

; Measure cho ổ đĩa 4
[MeasureDrive4_Total]
Measure=FreeDiskSpace
Drive=[MeasureScript:GetDriveLetter(4)]:
Total=1
UpdateDivider=10
Disabled=([MeasureScript:GetDriveCount()] < 4 ? 1 : 0)
DynamicVariables=1

[MeasureDrive4_Used]
Measure=FreeDiskSpace
Drive=[MeasureScript:GetDriveLetter(4)]:
InvertMeasure=1
UpdateDivider=10
Disabled=([MeasureScript:GetDriveCount()] < 4 ? 1 : 0)
DynamicVariables=1

; RAM
[MeasureRAM_Total]
Measure=PhysicalMemory
Total=1
UpdateDivider=5

[MeasureRAM_Used]
Measure=PhysicalMemory
UpdateDivider=5

; ===== STYLES =====

[StyleText]
FontColor=#TextColor#
FontFace=#FontFace#
StringStyle=Bold
AntiAlias=1

; ===== Ổ ĐĨA 1 =====

[BarDrive1_Background]
Meter=Shape
X=#Padding#
Y=#StartY#
Shape=Rectangle 0,0,#BarWidth#,#BarHeight#,#BarRadius# | Fill Color #BarBG# | StrokeWidth 0
Hidden=([MeasureScript:GetDriveCount()] < 1 ? 1 : 0)
DynamicVariables=1

[BarDrive1_Progress]
Meter=Shape
MeasureName=MeasureDrive1_Used
X=#Padding#
Y=#StartY#
DynamicVariables=1
Shape=Rectangle 0,0,(([MeasureDrive1_Total:] > 0 ? ([MeasureDrive1_Used:] / [MeasureDrive1_Total:] * #BarWidth#) : 0)),#BarHeight#,#BarRadius# | Fill Color [MeasureScript:GetDriveColor(1)] | StrokeWidth 0
Hidden=([MeasureScript:GetDriveCount()] < 1 ? 1 : 0)

[IconDrive1]
Meter=Shape
X=(#Padding# + 10)
Y=(#StartY# + 10)
Shape=Rectangle 0,0,20,20,3 | Fill Color 255,255,255,255 | StrokeWidth 0
Shape2=Rectangle 4,4,12,12,2 | Fill Color [MeasureScript:GetDriveColor(1)] | StrokeWidth 0
Hidden=([MeasureScript:GetDriveCount()] < 1 ? 1 : 0)
DynamicVariables=1

[LabelDrive1]
Meter=String
MeterStyle=StyleText
X=(#Padding# + 40)
Y=(#StartY# + 12)
FontSize=#FontSize#
Text="[MeasureScript:GetDriveLetter(1)]: [MeasureScript:GetDriveName([MeasureScript:GetDriveLetter(1)])]"
FontColor=255,255,255,255
Hidden=([MeasureScript:GetDriveCount()] < 1 ? 1 : 0)
DynamicVariables=1

[InfoDrive1]
Meter=String
MeterStyle=StyleText
MeasureName=MeasureDrive1_Used
MeasureName2=MeasureDrive1_Total
X=(#Padding# + #BarWidth# - 10)
Y=(#StartY# + 12)
FontSize=#FontSizeSmall#
Text="%1B / %2B"
AutoScale=1
NumOfDecimals=1
StringAlign=Right
FontColor=255,255,255,255
Hidden=([MeasureScript:GetDriveCount()] < 1 ? 1 : 0)
DynamicVariables=1

; ===== Ổ ĐĨA 2 =====

[BarDrive2_Background]
Meter=Shape
X=#Padding#
Y=(#StartY# + #SpacingY#)
Shape=Rectangle 0,0,#BarWidth#,#BarHeight#,#BarRadius# | Fill Color #BarBG# | StrokeWidth 0
Hidden=([MeasureScript:GetDriveCount()] < 2 ? 1 : 0)
DynamicVariables=1

[BarDrive2_Progress]
Meter=Shape
MeasureName=MeasureDrive2_Used
X=#Padding#
Y=(#StartY# + #SpacingY#)
DynamicVariables=1
Shape=Rectangle 0,0,(([MeasureDrive2_Total:] > 0 ? ([MeasureDrive2_Used:] / [MeasureDrive2_Total:] * #BarWidth#) : 0)),#BarHeight#,#BarRadius# | Fill Color [MeasureScript:GetDriveColor(2)] | StrokeWidth 0
Hidden=([MeasureScript:GetDriveCount()] < 2 ? 1 : 0)

[IconDrive2]
Meter=Shape
X=(#Padding# + 10)
Y=(#StartY# + #SpacingY# + 10)
Shape=Rectangle 0,0,20,20,3 | Fill Color 255,255,255,255 | StrokeWidth 0
Shape2=Rectangle 4,4,12,12,2 | Fill Color [MeasureScript:GetDriveColor(2)] | StrokeWidth 0
Hidden=([MeasureScript:GetDriveCount()] < 2 ? 1 : 0)
DynamicVariables=1

[LabelDrive2]
Meter=String
MeterStyle=StyleText
X=(#Padding# + 40)
Y=(#StartY# + #SpacingY# + 12)
FontSize=#FontSize#
Text="[MeasureScript:GetDriveLetter(2)]: [MeasureScript:GetDriveName([MeasureScript:GetDriveLetter(2)])]"
FontColor=255,255,255,255
Hidden=([MeasureScript:GetDriveCount()] < 2 ? 1 : 0)
DynamicVariables=1

[InfoDrive2]
Meter=String
MeterStyle=StyleText
MeasureName=MeasureDrive2_Used
MeasureName2=MeasureDrive2_Total
X=(#Padding# + #BarWidth# - 10)
Y=(#StartY# + #SpacingY# + 12)
FontSize=#FontSizeSmall#
Text="%1B / %2B"
AutoScale=1
NumOfDecimals=1
StringAlign=Right
FontColor=255,255,255,255
Hidden=([MeasureScript:GetDriveCount()] < 2 ? 1 : 0)
DynamicVariables=1

; ===== RAM =====

[BarRAM_Background]
Meter=Shape
X=#Padding#
Y=(#StartY# + ([MeasureScript:GetDriveCount()] * #SpacingY#))
Shape=Rectangle 0,0,#BarWidth#,#BarHeight#,#BarRadius# | Fill Color #BarBG# | StrokeWidth 0
DynamicVariables=1

[BarRAM_Progress]
Meter=Shape
MeasureName=MeasureRAM_Used
X=#Padding#
Y=(#StartY# + ([MeasureScript:GetDriveCount()] * #SpacingY#))
DynamicVariables=1
Shape=Rectangle 0,0,(([MeasureRAM_Total:] > 0 ? ([MeasureRAM_Used:] / [MeasureRAM_Total:] * #BarWidth#) : 0)),#BarHeight#,#BarRadius# | Fill Color 255,165,0,255 | StrokeWidth 0

[IconRAM]
Meter=Shape
X=(#Padding# + 10)
Y=(#StartY# + ([MeasureScript:GetDriveCount()] * #SpacingY#) + 10)
Shape=Rectangle 0,0,20,20,3 | Fill Color 255,255,255,255 | StrokeWidth 0
Shape2=Rectangle 2,6,16,8,1 | Fill Color 255,165,0,255 | StrokeWidth 0
Shape3=Rectangle 4,4,2,4 | Fill Color 255,165,0,255 | StrokeWidth 0
Shape4=Rectangle 7,4,2,4 | Fill Color 255,165,0,255 | StrokeWidth 0
Shape5=Rectangle 10,4,2,4 | Fill Color 255,165,0,255 | StrokeWidth 0
Shape6=Rectangle 13,4,2,4 | Fill Color 255,165,0,255 | StrokeWidth 0
DynamicVariables=1

[LabelRAM]
Meter=String
MeterStyle=StyleText
X=(#Padding# + 40)
Y=(#StartY# + ([MeasureScript:GetDriveCount()] * #SpacingY#) + 12)
FontSize=#FontSize#
Text="RAM"
FontColor=255,255,255,255
DynamicVariables=1

[InfoRAM]
Meter=String
MeterStyle=StyleText
MeasureName=MeasureRAM_Used
MeasureName2=MeasureRAM_Total
X=(#Padding# + #BarWidth# - 10)
Y=(#StartY# + ([MeasureScript:GetDriveCount()] * #SpacingY#) + 12)
FontSize=#FontSizeSmall#
Text="%1B / %2B"
AutoScale=1
NumOfDecimals=1
StringAlign=Right
FontColor=255,255,255,255
DynamicVariables=1
